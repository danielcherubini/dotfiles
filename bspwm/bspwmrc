#!/bin/sh

xsetroot -cursor_name left_ptr
$HOME/dotfiles/polybar/launch.sh
nitrogen --restore &
picom &
dunst &
sxhkd &
screenrotator &
pulseeffects --gapplication-service &
xset r rate 300 50 &
amixer -q -c 0 sset Master 100% &

# If refreshing bspwm, remove all previous rules to prevent doubling up.
bspc rule -r "*"


declare -a monitorarr
monitors=0
for m in $(xrandr --listactivemonitors | grep "DP" | cut -d " " -f6); do
	monitorarr[$monitors]=$m
	((monitors++))
done

case "$monitors" in
	"1" )
		echo "1"
		echo ${monitorarr[0]}
		bspc monitor -d I II III IV V VI VII VIII IX X
		;;
	"2" )
		echo "2"
		bspc monitor ${monitorarr[0]} -d I II III IV V
		bspc monitor ${monitorarr[1]} -d VI VII VIII IX X
		;;
esac

bspc config border_width 0
bspc config window_gap 16
bspc config top_padding 32	# top_padding I set equal to polybar's height
bspc config focus_follows_pointer true

bscp config remove_disabled_monitors true
bspc config remove_unplugged_monitor true
bspc config pointer_follows_monitor true

bspc rule -a pauvcontrol state=floating
bspc rule -a Nitrogen state=floating
bspc rule -a Lxappearance state=floating
bspc rule -a firefox:Toolkit state=floating

bspc rule -a kitty desktop=^1
bspc rule -a firefox desktop=^2
bspc rule -a electron-mail desktop=^3
bspc rule -a Pcmanfm desktop=^4
bspc rule -a thunar desktop=^4
bspc rule -a Mellowplayer3:\* desktop=^5
bspc rule -a Slack desktop=^6
bspc rule -a discord desktop=^6
bspc rule -a GitKraken desktop=^10
